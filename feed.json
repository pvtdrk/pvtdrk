{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hey,",
    "description": "",
    "home_page_url": "https://pvtdrk.com",
    "feed_url": "https://pvtdrk.com/feed.json",
    "user_comment": "",
    "author": {
        "name": "pvtdrk"
    },
    "items": [
        {
            "id": "https://pvtdrk.com/vmware-acc-install-with-ad-integration.html",
            "url": "https://pvtdrk.com/vmware-acc-install-with-ad-integration.html",
            "title": "VMware ACC install with AD integration",
            "summary": " A screenshot heavy paint by numbers look at installing the VMware Cloud Connector in a Home Lab for testing AD integration with UEM. As always for full pre-req's refer to the official documentation this serves only as a visual overview of what to expect&hellip;",
            "content_html": "\n  <p>\n    A screenshot heavy paint by numbers look at installing the VMware Cloud Connector in a Home Lab for testing AD integration with UEM. As always for full pre-req's refer to the official documentation this serves only as a visual overview of what to expect so is not inline with production best practices, with that out the way lets jump in.\n  </p>\n\n  <p>\n    Enable and download ACC from within the console:\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/EnableACC.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/EnableACC-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/EnableACC-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/EnableACC-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/EnableACC-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/EnableACC-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/EnableACC-2xl.png 1600w\"  height=\"712\" width=\"1847\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Set a Password for the ACC certificate.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/download-ACC.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/download-ACC-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/download-ACC-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/download-ACC-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/download-ACC-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/download-ACC-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/download-ACC-2xl.png 1600w\"  height=\"715\" width=\"1157\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Once the installer has downloaded, Run as Administrator\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/Run-Installer.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/Run-Installer-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/Run-Installer-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/Run-Installer-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/Run-Installer-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/Run-Installer-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/Run-Installer-2xl.png 1600w\"  height=\"225\" width=\"1130\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Onto the Installer, not much to note here.\n  </p>\n\n  <div  class=\"gallery-wrapper gallery-wrapper--center\">\n    <div class=\"gallery\" data-columns=\"3\">\n      <figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_01-2.png\" data-size=\"499x378\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_01-2-thumbnail.png\" height=\"378\" width=\"499\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_23.png\" data-size=\"499x378\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_23-thumbnail.png\" height=\"378\" width=\"499\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_45.png\" data-size=\"499x378\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h27_45-thumbnail.png\" height=\"378\" width=\"499\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_04.png\" data-size=\"499x379\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_04-thumbnail.png\" height=\"379\" width=\"499\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_23.png\" data-size=\"500x380\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_23-thumbnail.png\" height=\"380\" width=\"500\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_39-2.png\" data-size=\"499x379\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h28_39-2-thumbnail.png\" height=\"379\" width=\"499\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h29_20.png\" data-size=\"500x380\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h29_20-thumbnail.png\" height=\"380\" width=\"500\" alt=\"\" />\n      </a>\n      \n    </figure>\n    </div>\n  </div>\n\n  <p>\n    Once it's complete we can check the service has started successfully:\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h29_51.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h29_51-2xl.png 1600w\"  height=\"241\" width=\"805\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    And Back to the console for a test connection:\n  </p>\n\n  <div  class=\"gallery-wrapper gallery-wrapper--center\">\n    <div class=\"gallery\" data-columns=\"3\">\n      <figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h30_49.png\" data-size=\"1493x743\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h30_49-thumbnail.png\" height=\"358\" width=\"720\" alt=\"\" />\n      </a>\n      \n    </figure><figure class=\"gallery__item\">\n      <a href=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h31_09.png\" data-size=\"622x89\">\n        <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/gallery/2021-03-31_16h31_09-thumbnail.png\" height=\"89\" width=\"622\" alt=\"\" />\n      </a>\n      \n    </figure>\n    </div>\n  </div>\n\n    <h2 id=\"onto-directory-services\">\n      Onto Directory Services\n    </h2>\n\n  <p>\n    Now the ACC is installed and confirmed running we can configure Directory Services under Enterprise Integration:\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h32_22.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h32_22-2xl.png 1600w\"  height=\"388\" width=\"1838\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Not doing any SAML auth in the lab\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h33_07.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h33_07-2xl.png 1600w\"  height=\"893\" width=\"1637\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Directory setup\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h41_38.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h41_38-2xl.png 1600w\"  height=\"410\" width=\"1593\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    If the config in the setup was correct the Auto Detect will populate the below fields, if not you can continue through the setup steps and manually set ports, bind type etc. Test connection option to validate the config\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h42_01.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h42_01-2xl.png 1600w\"  height=\"673\" width=\"1577\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Users and Groups settings.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h36_10.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_10-2xl.png 1600w\"  height=\"421\" width=\"1598\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Complete.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h36_29.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_29-2xl.png 1600w\"  height=\"845\" width=\"1591\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    At this point you can close out of this.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h36_37.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h36_37-2xl.png 1600w\"  height=\"1009\" width=\"1920\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Another Test connection, in this test you can also complete a user / group lookup\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/12/2021-03-31_16h40_00.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-xs.png 300w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-sm.png 480w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-md.png 768w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-lg.png 1024w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-xl.png 1360w ,https://pvtdrk.com/media/posts/12/responsive/2021-03-31_16h40_00-2xl.png 1600w\"  height=\"516\" width=\"1125\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Success, ACC and AD is up and running you can start to configure groups and enrol AD users etc.\n  </p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-03-31T17:10:38+01:00",
            "date_modified": "2021-03-31T17:10:38+01:00"
        },
        {
            "id": "https://pvtdrk.com/access-on-prem-install.html",
            "url": "https://pvtdrk.com/access-on-prem-install.html",
            "title": "Access on-prem install",
            "summary": " A quick and dirty install overview for VMware Access / Identity Manager, this will be a single node and is intended for the home lab environment to enable testing and understanding of the base technology, for production we would need greater care to be&hellip;",
            "content_html": "\n  <p>\n    A quick and dirty install overview for VMware Access / Identity Manager, this will be a single node and is intended for the home lab environment to enable testing and understanding of the base technology, for production we would need greater care to be taken for pre req's and sizing for example Reverse DNS and a true Access Cluster.\n  </p>\n\n    <h2 id=\"database\">\n      Database\n    </h2>\n\n  <p>\n    This is done via a script run in SQL management studio please see VMware official documentation for the latest version:<br><br>- Launch SQL Management Studio and open New Query&nbsp;\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/11/New-Query-2.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/11/responsive/New-Query-2-xs.png 300w ,https://pvtdrk.com/media/posts/11/responsive/New-Query-2-sm.png 480w ,https://pvtdrk.com/media/posts/11/responsive/New-Query-2-md.png 768w ,https://pvtdrk.com/media/posts/11/responsive/New-Query-2-lg.png 1024w ,https://pvtdrk.com/media/posts/11/responsive/New-Query-2-xl.png 1360w ,https://pvtdrk.com/media/posts/11/responsive/New-Query-2-2xl.png 1600w\"  height=\"47\" width=\"345\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    <br>- Copy the script from VMware and paste them in the query window (there are multiple options available based on required authentication type)<br>- The copied information then needs to be edited in line with the instructions included with it<br>- Execute\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/11/Execute-2.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/11/responsive/Execute-2-xs.png 300w ,https://pvtdrk.com/media/posts/11/responsive/Execute-2-sm.png 480w ,https://pvtdrk.com/media/posts/11/responsive/Execute-2-md.png 768w ,https://pvtdrk.com/media/posts/11/responsive/Execute-2-lg.png 1024w ,https://pvtdrk.com/media/posts/11/responsive/Execute-2-xl.png 1360w ,https://pvtdrk.com/media/posts/11/responsive/Execute-2-2xl.png 1600w\"  height=\"427\" width=\"1005\" alt=\"\" />\n      \n    </figure>\n\n    <h2 id=\"appliance\">\n      Appliance\n    </h2>\n\n  <p>\n    - Head over to the VMware resource portal and download the OVA<br>- using your vSphere client use the deploy OVF Template action<br>- When selecting template browse to the downloaded OVA<br>- Add name and location to continue through the template guide<br>- For this I am using Thin Provisioning&nbsp;<br>- Network I am sitting this behind my PFsense Appliance<br>- You should now be presented with additional networking properties for this homelab install I will only set the hostname and leave everything else blank and will commit DNS setting on the PFsense side of the house as I will also need to set the HAProxy details on it anyway.<br>- Finish<br><br>Once it's build, power it on and give it some time\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/11/LoginAccess.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/11/responsive/LoginAccess-xs.png 300w ,https://pvtdrk.com/media/posts/11/responsive/LoginAccess-sm.png 480w ,https://pvtdrk.com/media/posts/11/responsive/LoginAccess-md.png 768w ,https://pvtdrk.com/media/posts/11/responsive/LoginAccess-lg.png 1024w ,https://pvtdrk.com/media/posts/11/responsive/LoginAccess-xl.png 1360w ,https://pvtdrk.com/media/posts/11/responsive/LoginAccess-2xl.png 1600w\"  height=\"337\" width=\"920\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    Head on over to the URL indicated please be aware this does need to be accessed via name and not IP else the remaining steps will fail.<br><br>- Set passwords for the Admin, Root and SSH accounts<br>- Now we connect to our DB so toggle to External Database<br>- Depending on the DB query used to create your connection string might differ here but refer to VMware documentation for further details<br>- (my lab used string example) jdbc:sqlserver://DBIPADDRESS;DatabaseName=saasdb<br>- Username and password outlined in the original query&nbsp;<br>- Note if DB authentication fails check the created user &gt; perhaps reset password and password enforced options etc.<br>- If the connection is successful continue and wait for DB setup / initialization to complete\n  </p>\n\n    <h2 id=\"successnbsp\">\n      Success&nbsp;\n    </h2>\n\n  <p>\n    You now have an Access node up and running you can log into if you have followed the mess of steps above you should see the health status complains about reverse lookup not being found for me I added a host override on PFsense in the DNSResolver Service explicitly for this Access node and a HAproxy entry to finalize my install so it is externally available.\n  </p>\n\n  <p>\n    Additional note regarding Certs: if using CertifyTheWeb certificate tool outlined in another post the certificate might fail here as it does not chain to root, to resolve this open MMC and add certificate snap in, export your wild card cert with full chain option this will then allow a successful import of the certificate into Access\n  </p>\n\n  <p>\n    \n  </p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-03-31T12:19:11+01:00",
            "date_modified": "2021-03-31T12:57:01+01:00"
        },
        {
            "id": "https://pvtdrk.com/running-your-homelab-behind-pfsense.html",
            "url": "https://pvtdrk.com/running-your-homelab-behind-pfsense.html",
            "title": "Running your Homelab behind pfSense",
            "summary": " The Homelab is up and running but you have a single IP and want to run all the things, this might help.&nbsp; Leveraging HAProxy on pfSense we can drive traffic to specified servers with the single external IP and all SSL is handled by&hellip;",
            "content_html": "\n  <p>\n    The Homelab is up and running but you have a single IP and want to run all the things, this might help.&nbsp;<br><br>Leveraging HAProxy on pfSense we can drive traffic to specified servers with the single external IP and all SSL is handled by the target server.<br><br>Assumptions:<br><br>- Router has a DMZ configured and this has your WAN pfSense listed<br>- Subdomain A record created for target domain<br><br>Ok lets get it running, seen as we have an SSL cert to hand we can bind that to https on our target server<br><br>- Log in to pfSense and head to system &gt; package manager<br>- Hopeful you have already installed Open-VM-Tools for performance<br>&nbsp; &nbsp;-Search for HAProxy and click install &gt; confirm<br>\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.11.56.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.11.56-2xl.png 1600w\"  height=\"664\" width=\"1160\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - You should now have HAProxy under the services menu<br>    - Lets get a backend setup first\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.14.18.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.14.18-2xl.png 1600w\"  height=\"384\" width=\"1155\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Add and give it a name<br>        - Add IP and port for this backend server<br>        - Leave everything else as default with the exception of Health Check set this to basic<br>        - Save\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.15.39.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.15.39-2xl.png 1600w\"  height=\"640\" width=\"1187\" alt=\"\" />\n      \n    </figure>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.17.14.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.17.14-2xl.png 1600w\"  height=\"313\" width=\"1151\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Add a front end<br>        - Give it a name and external details set type to SSL / https\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.23.08.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.23.08-2xl.png 1600w\"  height=\"346\" width=\"1157\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Set Expression Server Name Indication TLS extension ends with: <br>            - Value - target subdomain\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.20.13.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.20.13-2xl.png 1600w\"  height=\"428\" width=\"1161\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    &nbsp;\n  </p>\n\n  <p>\n    - Action use backend (currently only one configured)<br>            - Here you could have multiple sub domains as backends and redirect them as required\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.21.45.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.21.45-2xl.png 1600w\"  height=\"213\" width=\"1061\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Save<br>- Apply changes<br>\n  </p>\n\n  <p>\n    lastly go to HAProxy settings and enable the service, you will need to specify a maximum number of connections.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-14.33.04.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-14.33.04-2xl.png 1600w\"  height=\"224\" width=\"1162\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - At this point you should be able to run an SSL checker externally and see your valid chain returned&nbsp;<br>- If external checks are failing check 443 is allowed on the pfSense firewall as it is blocked by default.\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/10/Screenshot-2021-02-05-at-16.14.14.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-xs.png 300w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-sm.png 480w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-md.png 768w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-lg.png 1024w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-xl.png 1360w ,https://pvtdrk.com/media/posts/10/responsive/Screenshot-2021-02-05-at-16.14.14-2xl.png 1600w\"  height=\"442\" width=\"1159\" alt=\"\" />\n      \n    </figure>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-02-05T16:17:33+00:00",
            "date_modified": "2021-02-05T16:17:33+00:00"
        },
        {
            "id": "https://pvtdrk.com/free-ish-ssl-certs.html",
            "url": "https://pvtdrk.com/free-ish-ssl-certs.html",
            "title": "Free-ish SSL Certs",
            "summary": " *Trusted public certs on the super cheap because it's just a homelab, can do. - You will need a domain name, register your chosen domain at any of the many providers I'm using GoDaddy because there was an offer and it had API integration&hellip;",
            "content_html": "\n  <p>\n    *Trusted public certs on the super cheap because it's just a homelab, can do.<br><br>- You will need a domain name, register your chosen domain at any of the many providers I'm using GoDaddy because there was an offer and it had API integration with our SSL too Certify the Web<br>- Certify the web, this is the application that will generate our certs:<br><br>Lets jump into a overview of this:<br><br>Install Certify the web accepting defaults and Launch it:<br><br>- click new certificates &gt; this will prompt you to register a new contact &gt; complete this:<br>\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/8/Screenshot-2021-02-05-at-11.48.49.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-xs.png 300w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-sm.png 480w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-md.png 768w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-lg.png 1024w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-xl.png 1360w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.48.49-2xl.png 1600w\"  height=\"451\" width=\"515\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Go back to new certificate<br>- Add primary domain to list you can also add a wildcard in addition to the primary a wildcard is useful\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/8/Screenshot-2021-02-05-at-11.50.03.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-xs.png 300w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-sm.png 480w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-md.png 768w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-lg.png 1024w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-xl.png 1360w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.03-2xl.png 1600w\"  height=\"642\" width=\"942\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - DNS update method is dependant on how your site is managed <br>    - Godaddy &gt; create API key (production not ote) in dev portal and add to certify the web credentials<br>    - Click … to check API and if working the zones Id section should be populated\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/8/Screenshot-2021-02-05-at-11.50.56.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-xs.png 300w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-sm.png 480w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-md.png 768w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-lg.png 1024w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-xl.png 1360w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-11.50.56-2xl.png 1600w\"  height=\"645\" width=\"942\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Change to deployment section on the right side menu<br>    - Select No deployment, this will save the certificate to your local machine\n  </p>\n\n    <figure class=\"post__image post__image--center\">\n      <img loading=\"lazy\" src=\"https://pvtdrk.com/media/posts/8/Screenshot-2021-02-05-at-12.16.37.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-xs.png 300w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-sm.png 480w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-md.png 768w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-lg.png 1024w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-xl.png 1360w ,https://pvtdrk.com/media/posts/8/responsive/Screenshot-2021-02-05-at-12.16.37-2xl.png 1600w\"  height=\"639\" width=\"945\" alt=\"\" />\n      \n    </figure>\n\n  <p>\n    - Review the preview page <br>- Run the request certificate<br>- You should now have a valid certificate<br>    - The output folder isn’t clear but you should find them in C:\\ProgramData\\certify\\assets\\\n  </p>\n\n  <p>\n    Now find something to do with your shiny new certs.\n  </p>\n\n  <p>\n    *Things to note:\n  </p>\n\n  <p>\n    - Certs are valid for 90 days at a time, renewal process is built into Certify the Web application and you can setup target locations for the certs to go post renewal instead of manually adding them each time they are updated\n  </p>\n\n  <p>\n    - They are not password protected so depending what you intend to use them with you might need to take some extra steps before an install will accept them, the password section is found on the advanced tab next to domains in the certificates section.\n  </p>\n\n  <p>\n    \n  </p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-02-05T13:24:25+00:00",
            "date_modified": "2021-02-05T17:38:28+00:00"
        },
        {
            "id": "https://pvtdrk.com/blog.html",
            "url": "https://pvtdrk.com/blog.html",
            "title": "Blog",
            "summary": "List of blog things",
            "content_html": "<p>List of blog things</p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-02-05T10:31:30+00:00",
            "date_modified": "2021-02-05T10:31:30+00:00"
        },
        {
            "id": "https://pvtdrk.com/installing-pfsense-2.html",
            "url": "https://pvtdrk.com/installing-pfsense-2.html",
            "title": "ESXi 7 on USB guide",
            "summary": "Pretty easy paint by number guide here you just need a few items; - ESXi ISO - USB key(s) or target USB drive and other source media to run ISO from - Rufus application to put ISO onto USB There are some limitations on running&hellip;",
            "content_html": "<p>Pretty easy paint by number guide here you just need a few items;</p>\n<p>- ESXi ISO</p>\n<p>- USB key(s) or target USB drive and other source media to run ISO from</p>\n<p>- Rufus application to put ISO onto USB </p>\n<p>There are some limitations on running ESXi from USB the key size can impact the partitioning of the target ESXi install but that is out of scope for this quick run down use keys over 16GB and it's a non issue for the homelab.</p>\n<p>Install / launch Rufus and select your target device, ISO and check the remaining setting:</p>\n<figure class=\"post__image\"><img loading=\"lazy\"  src=\"https://pvtdrk.com/media/posts/5/Screenshot-2021-01-31-at-13.55.52.png\" sizes=\"(max-width: 48em) 100vw, 768px\" srcset=\"https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-xs.png 300w ,https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-sm.png 480w ,https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-md.png 768w ,https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-lg.png 1024w ,https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-xl.png 1360w ,https://pvtdrk.com/media/posts/5/responsive/Screenshot-2021-01-31-at-13.55.52-2xl.png 1600w\"  alt=\"Rufus setting \" width=\"471\" height=\"718\"></figure>\n<p>once this is complete you can head on over to your hardware of choice pop in this install media USB and target USB drive, if you have multiples of the same flash drive you can just start with the newly created boot media drive inserted and then take a note of it's ID &gt; insert the new target drive and rescan for devices.</p>\n<p>From this point its a lot of defaults settings, acknowledgements, keyboard layout and creation of the root account password once complete you can remove the install USB drive and reboot.</p>\n<p>you will now be booting off of the USB key, now log in to ESXi and configure your Datastores etc.</p>\n<p>One of the key benefits of this for me is not tying my ESXi install to my Datastores it's also easy to upgrade and rollback.</p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-02-05T10:28:59+00:00",
            "date_modified": "2021-02-05T13:00:36+00:00"
        },
        {
            "id": "https://pvtdrk.com/guides-for-things.html",
            "url": "https://pvtdrk.com/guides-for-things.html",
            "title": "Guides for things",
            "summary": "List of guides: ESXi on USB Free-ish SSL Certs Running your Homelab behind pfSense Access on-Prem install VMware ACC install with AD integration",
            "content_html": "<p><strong>List of guides:</strong></p>\n<p><a href=\"https://pvtdrk.com/installing-pfsense-2.html\">ESXi on USB</a></p>\n<p><a href=\"https://pvtdrk.com/free-ish-ssl-certs.html\">Free-ish SSL Certs</a></p>\n<p><a href=\"https://pvtdrk.com/running-your-homelab-behind-pfsense.html\">Running your Homelab behind pfSense</a></p>\n<p><a href=\"https://pvtdrk.com/access-on-prem-install.html\">Access on-Prem install</a></p>\n<p><a href=\"https://pvtdrk.com/vmware-acc-install-with-ad-integration.html\">VMware ACC install with AD integration</a></p>",
            "author": {
                "name": "pvtdrk"
            },
            "tags": [
            ],
            "date_published": "2021-02-05T09:48:54+00:00",
            "date_modified": "2021-03-31T17:12:19+01:00"
        }
    ]
}
